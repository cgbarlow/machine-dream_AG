# Machine Dream - Terminal Menu Interface (TUI) Specification

**Component:** Terminal User Interface (TUI)
**Version:** 2.0.0
**Date:** January 6, 2026
**Status:** Implementation-Ready (ink-based)

---

## 1. Executive Summary

This specification defines a comprehensive Terminal User Interface (TUI) for the Machine Dream system - a Cognitive Puzzle Solver using the GRASP loop and AgentDB memory. The TUI provides an intuitive, interactive menu-driven interface to all puzzle solving, memory management, dreaming/consolidation, and benchmarking functionality.

### Key Features

- **Hierarchical Menu System**: Navigate through organized command categories
- **Interactive Forms**: Fill out command options with validation and help
- **Live Visualizations**: Real-time displays of solving progress and performance metrics
- **Keyboard & Mouse Support**: Full navigation with both input methods
- **Context-Sensitive Help**: Inline documentation and examples
- **Dashboard Views**: At-a-glance system status and metrics
- **Session Management**: Save and restore work sessions
- **Theme Support**: Light/dark themes with customization

---

## 2. Architecture Overview

### 2.1 Technology Stack

**Primary Framework**: `ink` (React-based TUI library)
- Modern React-based architecture using virtual DOM
- **Used by Claude Code** - proven in production
- **Node.js v24 + WSL compatible** - no stack overflow issues
- Component-based with React hooks for state management
- Declarative UI with JSX syntax
- Active maintenance with weekly updates
- Cross-platform (Linux, macOS, Windows, WSL)

**Why ink over blessed**:
- âŒ blessed/neo-blessed: Stack overflow on Node.js v24 + WSL (regex parsing bug)
- âœ… ink: Virtual DOM rendering, no regex issues
- âœ… ink: Modern React ecosystem and tooling
- âœ… ink: Better testing with React Testing Library
- âœ… ink: Same framework Claude Code uses successfully

**Dependencies**:
- `ink` v5.x - Terminal rendering framework
- `react` v18.x - Component model and virtual DOM
- TypeScript with JSX support

### 2.2 Component Architecture (React + ink)

**React Component Hierarchy**:
```tsx
<App>                           // Main application component
  <Box>                         // Root layout container
    <Header />                  // Title, subtitle
    <Box horizontal>            // Main content area
      <Sidebar                  // Navigation menu
        items={menuItems}
        onSelect={handleNav}
      />
      <ContentArea>             // Dynamic screen content
        {currentScreen === 'home' && <HomeScreen />}
        {currentScreen === 'solve' && <SolveScreen />}
        {/* ... other screens */}
      </ContentArea>
    </Box>
    <StatusBar                  // Bottom status line
      session={sessionId}
      status={statusText}
    />
  </Box>
</App>
```

**Layout Visual**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Terminal Window                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚             â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚   Main      â”‚ â”‚        Content Area                     â”‚ â”‚
â”‚ â”‚   Menu      â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚   (Left)    â”‚ â”‚  - React Components                     â”‚ â”‚
â”‚ â”‚             â”‚ â”‚  - Hooks for State                      â”‚ â”‚
â”‚ â”‚   * Home    â”‚ â”‚  - Dynamic Rendering                    â”‚ â”‚
â”‚ â”‚   # Solve   â”‚ â”‚  - Real-time Updates                    â”‚ â”‚
â”‚ â”‚   @ Memory  â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚   ~ Dream   â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚   + Bench   â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚   > Demo    â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚   % Config  â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚   ^ Export  â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚   = System  â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚             â”‚ â”‚                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status Bar: [Session] [Memory] [Database] [Time] [Help: F1] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Layout Specification

**Screen Dimensions**: Minimum 80x24 (recommended 120x40)

**Layout Zones**:
1. **Header** (2 lines): Title, version, current context
2. **Main Menu** (left, 20% width): Hierarchical navigation
3. **Content Area** (right, 78% width): Forms, displays, visualizations
4. **Status Bar** (1 line): System status, shortcuts, time
5. **Modal Dialogs**: Overlays for confirmations, help, errors

---

## 3. Main Menu Structure

### 3.1 Top-Level Menu

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Machine Dream    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–º ğŸ§© Solve Puzzle   â”‚
â”‚   ğŸ§  Memory         â”‚
â”‚   ğŸ’­ Dream          â”‚
â”‚   ğŸ“Š Benchmark      â”‚
â”‚   ğŸ¬ Demo           â”‚
â”‚   âš™ï¸ Config         â”‚
â”‚   ğŸ“¤ Export         â”‚
â”‚   ğŸ”§ System         â”‚
â”‚                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚   â„¹ï¸ Help           â”‚
â”‚   ğŸšª Exit           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Icons Legend**:
- ğŸ§© Solve - Puzzle solving with GRASP loop
- ğŸ§  Memory - AgentDB memory operations
- ğŸ’­ Dream - Night cycle consolidation
- ğŸ“Š Benchmark - Performance testing
- ğŸ¬ Demo - Puzzle solving demonstrations
- âš™ï¸ Config - Configuration management
- ğŸ“¤ Export - Data export utilities
- ğŸ”§ System - System utilities

### 3.2 Submenu Structure

Each top-level item expands to show subcommands:

```
ğŸ§© Solve Puzzle
  â”œâ”€â”€ Quick Solve
  â”œâ”€â”€ Advanced Solve
  â”œâ”€â”€ Batch Solve
  â””â”€â”€ Solve with Visualization

ğŸ§  Memory
  â”œâ”€â”€ Store Data
  â”œâ”€â”€ Retrieve Data
  â”œâ”€â”€ Search Memory
  â”œâ”€â”€ Consolidate
  â”œâ”€â”€ Optimize
  â”œâ”€â”€ Backup
  â””â”€â”€ Restore

ğŸ’­ Dream
  â”œâ”€â”€ Run Dream Cycle
  â”œâ”€â”€ Schedule Dreams
  â””â”€â”€ Dream Status

ğŸ“Š Benchmark
  â”œâ”€â”€ Run Benchmark
  â”œâ”€â”€ View Reports
  â””â”€â”€ Compare Results

ğŸ¬ Demo
  â”œâ”€â”€ Stakeholder Presentation
  â”œâ”€â”€ Quick Solve Demo
  â”œâ”€â”€ Transfer Learning Demo
  â”œâ”€â”€ Dreaming Visualization
  â””â”€â”€ Baseline Comparison

âš™ï¸ Config
  â”œâ”€â”€ View Configuration
  â”œâ”€â”€ Edit Settings
  â”œâ”€â”€ Validate Config
  â””â”€â”€ Export Config

ğŸ“¤ Export
  â”œâ”€â”€ Export Metrics
  â”œâ”€â”€ Export Results
  â”œâ”€â”€ Export Memory
  â””â”€â”€ Export All

ğŸ”§ System
  â”œâ”€â”€ Dashboard
  â”œâ”€â”€ Initialize
  â”œâ”€â”€ System Status
  â”œâ”€â”€ Cleanup
  â”œâ”€â”€ Health Check
  â””â”€â”€ Migrate
```

---

## 4. Screen Layouts

### 4.1 Home Screen / Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Machine Dream v0.1.0                           Session: main-20260105    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€ System Status â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Memory System:  âœ“ AgentDB (RL: ON, Reflexion: ON)                â”‚    â”‚
â”‚  â”‚ Sessions:       47 total, 3 today                                â”‚    â”‚
â”‚  â”‚ Database:       âœ“ Healthy (.agentdb/agent.db - 47.3 MB)          â”‚    â”‚
â”‚  â”‚ Uptime:         2h 34m                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€ Recent Activity â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 10:34 | Solved hard-01.json (47 iterations, 12.4s)               â”‚    â”‚
â”‚  â”‚ 10:28 | Dream cycle completed (47â†’5 patterns)                    â”‚    â”‚
â”‚  â”‚ 10:15 | Memory optimized (150 patterns â†’ 47 skills)              â”‚    â”‚
â”‚  â”‚ 10:05 | Benchmark completed (95% success rate)                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€ Quick Actions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [1] Quick Solve   [2] Memory Browser   [3] Dream Cycle           â”‚    â”‚
â”‚  â”‚ [4] Run Demo      [5] Benchmark        [6] System Health         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€ Performance Metrics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Avg Solve Time: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 8.3s (target: 10s)            â”‚    â”‚
â”‚  â”‚ Memory Usage:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 342 MB (limit: 2GB)           â”‚    â”‚
â”‚  â”‚ Success Rate:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 87% (target: 80%)             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[F1] Help  [F2] Config  [F10] Menu  [Ctrl+C] Exit         Memory: 342 MB
```

### 4.2 Solve Puzzle Form

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Solve Puzzle                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  Puzzle File:  [puzzles/hard-01.json                     ] [ğŸ“ Browse]   â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€ Memory System â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â—‹ ReasoningBank (stable, baseline)                               â”‚    â”‚
â”‚  â”‚ â— AgentDB (enhanced, RL-enabled)                                 â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚   â˜‘ Enable RL Learning                                           â”‚    â”‚
â”‚  â”‚   â˜‘ Enable Reflexion (error correction)                          â”‚    â”‚
â”‚  â”‚   â˜‘ Enable Skill Library (auto-extract)                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€ Solving Parameters â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Max Iterations:      [100  ]  â† â†’ (10-1000)                      â”‚    â”‚
â”‚  â”‚ Max Time (ms):       [300000]  â† â†’ (10000-600000)                â”‚    â”‚
â”‚  â”‚ Reflection Interval: [5    ]  â† â†’ (1-50)                         â”‚    â”‚
â”‚  â”‚ Attention Window:    [10   ]  â† â†’ (5-50)                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€ Strategy Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â˜‘ Naked Single        â˜‘ Hidden Single                            â”‚    â”‚
â”‚  â”‚ â˜‘ Pointing Pairs      â˜‘ Box-Line Reduction                       â”‚    â”‚
â”‚  â”‚ â˜ Naked Pairs         â˜ X-Wing                                   â”‚    â”‚
â”‚  â”‚ â˜ XY-Wing             â˜ Swordfish                                â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚ â˜‘ Enable Backtracking                                            â”‚    â”‚
â”‚  â”‚ Guess Threshold: [0.3] â† â†’ (0.0-1.0)                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€ Output Options â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â˜‘ Live Visualization                                             â”‚    â”‚
â”‚  â”‚ â˜‘ Export Trajectory                                              â”‚    â”‚
â”‚  â”‚ â˜‘ Dream After Solving                                            â”‚    â”‚
â”‚  â”‚ Save Results To: [results/solve-{timestamp}.json         ]       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  [  Start Solve  ]  [  Save Config  ]  [  Load Preset  ]  [  Cancel  ]   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[F1] Help  [Tab] Next Field  [â†‘â†“] Navigate  [Space] Toggle  [Enter] Submit
```

### 4.3 Live Solving Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Solving: hard-01.json                          Iteration: 23/100 (23%)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€ Puzzle Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€ Progress â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                              â”‚  â”‚                               â”‚     â”‚
â”‚  â”‚   5 3 Â· â”‚ Â· 7 Â· â”‚ Â· Â· Â·     â”‚  â”‚ Cells Filled:  41/81 (51%)   â”‚     â”‚
â”‚  â”‚   6 Â· Â· â”‚ 1 9 5 â”‚ Â· Â· Â·     â”‚  â”‚ Progress:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘   â”‚     â”‚
â”‚  â”‚   Â· 9 8 â”‚ Â· Â· Â· â”‚ Â· 6 Â·     â”‚  â”‚                               â”‚     â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€     â”‚  â”‚ Current Strategy:             â”‚     â”‚
â”‚  â”‚   8 Â· Â· â”‚ Â· 6 Â· â”‚ Â· Â· 3     â”‚  â”‚   Pointing Pairs             â”‚     â”‚
â”‚  â”‚   4 Â· Â· â”‚ 8 Â· 3 â”‚ Â· Â· 1     â”‚  â”‚                               â”‚     â”‚
â”‚  â”‚  *7*Â· Â· â”‚ Â· 2 Â· â”‚ Â· Â· 6     â”‚  â”‚ Focus Cell: (4,0)            â”‚     â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€     â”‚  â”‚ Candidates: {1, 7}           â”‚     â”‚
â”‚  â”‚   Â· 6 Â· â”‚ Â· Â· Â· â”‚ 2 8 Â·     â”‚  â”‚                               â”‚     â”‚
â”‚  â”‚   Â· Â· Â· â”‚ 4 1 9 â”‚ Â· Â· 5     â”‚  â”‚ Insights: 3                  â”‚     â”‚
â”‚  â”‚   Â· Â· Â· â”‚ Â· 8 Â· â”‚ Â· 7 9     â”‚  â”‚ - Strategy shift detected     â”‚     â”‚
â”‚  â”‚                              â”‚  â”‚ - Breakthrough at (3,5)      â”‚     â”‚
â”‚  â”‚ *Focus  Â·Empty  #Filled     â”‚  â”‚ - Pattern: Naked Triple      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€ Strategy Timeline â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1-10:  Naked Single â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                     â”‚   â”‚
â”‚  â”‚ 11-15: Hidden Single â–ˆâ–ˆâ–ˆ                                         â”‚   â”‚
â”‚  â”‚ 16-20: Pointing Pairs â–ˆâ–ˆâ–ˆâ–ˆ                                       â”‚   â”‚
â”‚  â”‚ 21-23: Pointing Pairs â–ˆâ–ˆ                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€ Recent Moves â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ #21 | (3,5) = 4 | Pointing Pairs  | âœ“ Valid                     â”‚  â”‚
â”‚  â”‚ #22 | (4,7) = 9 | Naked Single    | âœ“ Valid                     â”‚  â”‚
â”‚  â”‚ #23 | (4,0) = 7 | Pointing Pairs  | âœ“ Valid (current)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  [  Pause  ]  [  Step  ]  [  Skip to End  ]  [  Export  ]  [  Stop  ]   â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[Space] Pause  [S] Step  [E] End  [X] Stop             Elapsed: 00:04.8s
```


### 4.4 Memory Browser

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Memory Browser                                    Namespace: default     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  Search: [naked single                           ] [ğŸ”] Type: [All â–¼]   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€ Results (47 items) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                    â”‚   â”‚
â”‚  â”‚ â–º Pattern: naked-single-basic                      Success: 94%  â”‚   â”‚
â”‚  â”‚   Type: Strategy | Created: 2h ago | Used: 127 times             â”‚   â”‚
â”‚  â”‚   Description: Basic naked single detection in row/col/box        â”‚   â”‚
â”‚  â”‚   Size: 2.3 KB | TTL: Persistent                                  â”‚   â”‚
â”‚  â”‚                                                                    â”‚   â”‚
â”‚  â”‚ â–º Skill: naked-single-advanced                    Success: 87%   â”‚   â”‚
â”‚  â”‚   Type: Skill | Created: 1h ago | Used: 43 times                 â”‚   â”‚
â”‚  â”‚   Description: Advanced naked single with constraint chaining     â”‚   â”‚
â”‚  â”‚   Size: 4.1 KB | TTL: 30 days                                     â”‚   â”‚
â”‚  â”‚                                                                    â”‚   â”‚
â”‚  â”‚ â–º Experience: solve-session-047                                   â”‚   â”‚
â”‚  â”‚   Type: Experience | Created: 15m ago | Moves: 47                â”‚   â”‚
â”‚  â”‚   Description: Solved hard-01.json using naked single strategy    â”‚   â”‚
â”‚  â”‚   Size: 12.7 KB | TTL: 7 days                                     â”‚   â”‚
â”‚  â”‚                                                                    â”‚   â”‚
â”‚  â”‚ ...                                                                â”‚   â”‚
â”‚  â”‚                                                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€ Selected: Pattern: naked-single-basic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ {                                                                 â”‚   â”‚
â”‚  â”‚   "id": "pattern-ns-001",                                        â”‚   â”‚
â”‚  â”‚   "type": "strategy",                                            â”‚   â”‚
â”‚  â”‚   "name": "naked-single-basic",                                  â”‚   â”‚
â”‚  â”‚   "successRate": 0.94,                                           â”‚   â”‚
â”‚  â”‚   "usageCount": 127,                                             â”‚   â”‚
â”‚  â”‚   "conditions": ["cell has single candidate"],                   â”‚   â”‚
â”‚  â”‚   "actions": ["place value in cell"],                            â”‚   â”‚
â”‚  â”‚   "examples": [ ... ]                                            â”‚   â”‚
â”‚  â”‚ }                                                                 â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  [Store] [Retrieve] [Delete] [Export] [Optimize] [Consolidate] [Backup] â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[/] Search  [Enter] View  [Del] Delete  [E] Export              Page: 1/5
```

### 4.5 Benchmark Results

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Benchmark Results                                Run: full-20260105      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€ Overall Summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Total Tests: 200 (50 easy, 50 medium, 50 hard, 50 expert)       â”‚   â”‚
â”‚  â”‚ Success Rate: 87% (174/200)                                      â”‚   â”‚
â”‚  â”‚ Avg Solve Time: 8.3s (target: 10s) âœ“                           â”‚   â”‚
â”‚  â”‚ Total Duration: 27m 43s                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€ Baseline Comparison â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚              â”‚ Success â”‚ Avg Time â”‚ Iterations â”‚ Memory          â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚   â”‚
â”‚  â”‚ Single-Shot  â”‚ 42%     â”‚ 15.2s    â”‚ 1          â”‚ 120 MB          â”‚   â”‚
â”‚  â”‚ Naive Cont.  â”‚ 68%     â”‚ 11.7s    â”‚ 35         â”‚ 180 MB          â”‚   â”‚
â”‚  â”‚ GRASP        â”‚ 87% âœ“   â”‚ 8.3s âœ“   â”‚ 28 âœ“       â”‚ 240 MB          â”‚   â”‚
â”‚  â”‚ GRASP+AgentDBâ”‚ 92% âœ“âœ“  â”‚ 7.1s âœ“âœ“  â”‚ 23 âœ“âœ“      â”‚ 310 MB          â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€ Performance by Difficulty â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ Easy:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 98% (49/50)  Avg: 2.1s           â”‚   â”‚
â”‚  â”‚ Medium:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 94% (47/50)  Avg: 5.8s           â”‚   â”‚
â”‚  â”‚ Hard:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 82% (41/50)  Avg: 12.4s          â”‚   â”‚
â”‚  â”‚ Expert:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 74% (37/50)  Avg: 23.7s          â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€ Strategy Effectiveness â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ Naked Single:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 96% (1,247 uses)        â”‚   â”‚
â”‚  â”‚ Hidden Single:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ 89% (843 uses)          â”‚   â”‚
â”‚  â”‚ Pointing Pairs:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 71% (412 uses)          â”‚   â”‚
â”‚  â”‚ Box-Line Reduct.:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 65% (287 uses)          â”‚   â”‚
â”‚  â”‚ Guess:             â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 42% (93 uses)           â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  [View Details] [Export Report] [Compare] [Re-run] [Back]               â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[D] Details  [E] Export  [C] Compare  [R] Re-run  [Q] Back
```

---

## 5. Interactive Components

### 5.1 Form Controls

**Input Fields**:
```
Label: [value                                    ]
       â†‘ Cursor position
```

**Numeric Sliders**:
```
Max Iterations: [100  ] â† â†’ (10-1000)
                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  10%
```

**Checkboxes**:
```
â˜‘ Enabled     (checked)
â˜ Disabled    (unchecked)
```

**Radio Buttons**:
```
â—‹ Option 1    (unselected)
â— Option 2    (selected)
â—‹ Option 3    (unselected)
```

**Dropdown Menus**:
```
Memory System: [AgentDB        â–¼]

Expanded:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— AgentDB (enhanced)    â”‚
â”‚ â—‹ ReasoningBank (basic) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Browsers**:
```
[ğŸ“ Browse Files]

Modal:
â”Œâ”€â”€â”€ Select Puzzle File â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Path: /home/vscode/machine-dream_AG/    â”‚
â”‚                                          â”‚
â”‚ ğŸ“ puzzles/                              â”‚
â”‚   â”œâ”€â”€ ğŸ“„ easy-01.json                   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ medium-01.json                 â”‚
â”‚   â”œâ”€â”€ ğŸ“„ hard-01.json           [Select]â”‚
â”‚   â””â”€â”€ ğŸ“„ expert-01.json                 â”‚
â”‚                                          â”‚
â”‚ [  OK  ]  [  Cancel  ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Data Tables

**Sortable Columns**:
```
â”Œâ”€â”€â”€ Strategy Performance â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Strategy â†‘         â”‚ Uses  â”‚ Success â”‚ Avg Time â”‚ Last â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ naked-single       â”‚ 247   â”‚ 98.4%   â”‚ 12ms     â”‚ 2m   â”‚
â”‚ hidden-single      â”‚ 189   â”‚ 94.7%   â”‚ 18ms     â”‚ 5m   â”‚
â”‚ pointing-pairs     â”‚ 76    â”‚ 87.2%   â”‚ 24ms     â”‚ 8m   â”‚
â”‚ box-line-reduction â”‚ 43    â”‚ 91.1%   â”‚ 31ms     â”‚ 12m  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
Click column header to sort. [â†‘â†“] Navigate rows.
```

**Pagination**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ...table content...                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Page: [1] 2 3 4 5 ... 12    [<] [>] [<<First] [Last>>]
```

### 5.3 Progress Indicators

**Progress Bars**:
```
Solving: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 60% (30/50 iterations)
         [Estimated: 8s remaining]
```

**Spinners**:
```
Loading... â ‹
Loading... â ™
Loading... â ¹
Loading... â ¸
```

**Multi-Step Progress**:
```
â”Œâ”€â”€â”€ Dream Cycle Progress â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Capture    (47 experiences)                    â”‚
â”‚ âœ“ Triage     (23 significant)                    â”‚
â”‚ â–¶ Compress   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45% (11/23)       â”‚
â”‚ â—‹ Abstract   (pending)                           â”‚
â”‚ â—‹ Integrate  (pending)                           â”‚
â”‚ â—‹ Verify     (pending)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 Modal Dialogs

**Confirmation Dialog**:
```
â”Œâ”€â”€â”€ Confirm Action â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  âš ï¸  Are you sure you want to clear all memory  â”‚
â”‚     and reset the learning database?            â”‚
â”‚                                                  â”‚
â”‚  This will delete 1,247 learned patterns and    â”‚
â”‚  cannot be undone.                              â”‚
â”‚                                                  â”‚
â”‚  [  Yes, Clear  ]           [  Cancel  ]        â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Alert Dialog**:
```
â”Œâ”€â”€â”€ Success â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  âœ“ Puzzle solved successfully!                  â”‚
â”‚                                                  â”‚
â”‚  Iterations: 47                                  â”‚
â”‚  Time: 12.4 seconds                             â”‚
â”‚  Strategy: Pointing Pairs                       â”‚
â”‚                                                  â”‚
â”‚  [  View Details  ]         [  OK  ]            â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Error Dialog**:
```
â”Œâ”€â”€â”€ Error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  âœ— Solving failed: Maximum iterations exceeded  â”‚
â”‚                                                  â”‚
â”‚  Details:                                        â”‚
â”‚  - Iterations: 100/100                          â”‚
â”‚  - Progress: 73% complete                       â”‚
â”‚  - Stuck at iteration 87                        â”‚
â”‚                                                  â”‚
â”‚  Suggestions:                                    â”‚
â”‚  â€¢ Increase max iterations                      â”‚
â”‚  â€¢ Enable backtracking                          â”‚
â”‚  â€¢ Try different strategies                     â”‚
â”‚                                                  â”‚
â”‚  [  View Log  ]  [  Retry  ]  [  Cancel  ]     â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 Help Panels

**Context-Sensitive Help**:
```
â”Œâ”€â”€â”€ Help: Solve Puzzle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  OVERVIEW                                        â”‚
â”‚  Execute puzzle solving with GRASP loop and     â”‚
â”‚  AgentDB memory integration.                    â”‚
â”‚                                                  â”‚
â”‚  PARAMETERS                                      â”‚
â”‚  â€¢ Puzzle File: Path to puzzle (JSON format)    â”‚
â”‚  â€¢ Memory System: AgentDB or ReasoningBank      â”‚
â”‚  â€¢ Max Iterations: Safety limit (default: 100)  â”‚
â”‚  â€¢ Strategies: Solving techniques to use        â”‚
â”‚                                                  â”‚
â”‚  EXAMPLES                                        â”‚
â”‚  Quick solve:                                    â”‚
â”‚    Use preset "Quick Solve" with defaults       â”‚
â”‚                                                  â”‚
â”‚  Advanced:                                       â”‚
â”‚    Enable RL + Reflexion for best results       â”‚
â”‚                                                  â”‚
â”‚  KEYBOARD SHORTCUTS                              â”‚
â”‚  Tab       - Next field                         â”‚
â”‚  Shift+Tab - Previous field                     â”‚
â”‚  Space     - Toggle checkbox                    â”‚
â”‚  Enter     - Submit form                        â”‚
â”‚  Esc       - Cancel                             â”‚
â”‚                                                  â”‚
â”‚  [  Close  ]                                     â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Keyboard Navigation

### 6.1 Global Shortcuts

```
F1          - Help (context-sensitive)
F2          - Quick access to Config
F3          - Search/Find
F10         - Toggle menu
Ctrl+C      - Exit application
Ctrl+R      - Refresh current view
Ctrl+S      - Save current state
Ctrl+L      - Clear screen/logs
Ctrl+P      - Open command palette
```

### 6.2 Navigation Shortcuts

```
â†‘ â†“         - Navigate menu items / table rows
â† â†’         - Navigate menu hierarchy / table columns
Tab         - Next field / Next section
Shift+Tab   - Previous field / Previous section
Enter       - Select / Submit / Execute
Esc         - Cancel / Go back / Close modal
Home        - First item / Top of list
End         - Last item / Bottom of list
PgUp/PgDn   - Scroll page up/down
```

### 6.3 Menu-Specific Shortcuts

**Main Menu**:
```
1-9         - Quick access to menu items
S           - Solve Puzzle
M           - Memory Browser
D           - Dream Cycle
B           - Benchmark
O           - Demo
C           - Config
E           - Export
Y           - System Utilities
H           - Help
Q           - Quit
```

**Form Shortcuts**:
```
Space       - Toggle checkbox / Radio button
â†‘ â†“         - Adjust slider / dropdown selection
â† â†’         - Adjust numeric values
Ctrl+Enter  - Submit form
Ctrl+W      - Close without saving
```

### 6.4 Data View Shortcuts

```
/           - Search / Filter
N           - Next result
P           - Previous result
R           - Refresh data
E           - Export current view
V           - View details
D           - Delete selected
Ctrl+A      - Select all
Ctrl+D      - Deselect all
```

---

## 7. Mouse Support

### 7.1 Click Actions

```
Single Click    - Select item / Focus field
Double Click    - Execute / Open details
Right Click     - Context menu
Scroll Wheel    - Scroll content
Click+Drag      - Resize panels (where applicable)
```

### 7.2 Context Menus

**Right-click on menu item**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Execute             â”‚
â”‚ View Details        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Add to Favorites    â”‚
â”‚ Create Shortcut     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Help                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Right-click on table row**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ View Details        â”‚
â”‚ Edit                â”‚
â”‚ Delete              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Copy ID             â”‚
â”‚ Export Row          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Color Schemes and Themes

### 8.1 Default Theme (Dark)

```javascript
const darkTheme = {
  // Background colors
  bg: {
    primary: '#1e1e1e',      // Main background
    secondary: '#252525',    // Panels, dialogs
    highlight: '#2d2d30',    // Hover states
    active: '#094771'        // Active selection
  },

  // Foreground colors
  fg: {
    primary: '#cccccc',      // Main text
    secondary: '#858585',    // Secondary text
    dim: '#555555',          // Disabled/dim text
    bright: '#ffffff'        // Emphasized text
  },

  // Semantic colors
  status: {
    success: '#4ec9b0',      // Green
    error: '#f48771',        // Red
    warning: '#dcdcaa',      // Yellow
    info: '#4fc1ff'          // Blue
  },

  // UI elements
  ui: {
    border: '#3e3e42',       // Borders
    scrollbar: '#424242',    // Scrollbars
    shadow: '#00000050',     // Shadows
    focus: '#007acc'         // Focus outline
  },

  // Syntax highlighting
  syntax: {
    keyword: '#569cd6',      // Keywords
    string: '#ce9178',       // Strings
    number: '#b5cea8',       // Numbers
    comment: '#6a9955',      // Comments
    function: '#dcdcaa'      // Functions
  }
};
```

### 8.2 Light Theme

```javascript
const lightTheme = {
  bg: {
    primary: '#ffffff',
    secondary: '#f3f3f3',
    highlight: '#e8e8e8',
    active: '#0078d4'
  },

  fg: {
    primary: '#000000',
    secondary: '#616161',
    dim: '#a0a0a0',
    bright: '#000000'
  },

  status: {
    success: '#0e8a16',
    error: '#d73a49',
    warning: '#f9c513',
    info: '#0366d6'
  },

  ui: {
    border: '#d0d0d0',
    scrollbar: '#c0c0c0',
    shadow: '#00000020',
    focus: '#0078d4'
  }
};
```

### 8.3 Theme Switching

```
Config > Theme > [Dark | Light | Auto | Custom]
```

**Auto Mode**: Matches system preference or time of day
- Day (6am-6pm): Light theme
- Night (6pm-6am): Dark theme

---

## 9. Configuration and Persistence

### 9.1 TUI Configuration File

`.machine-dream-tui.json`:
```json
{
  "theme": "dark",
  "layout": {
    "menuWidth": 20,
    "showStatusBar": true,
    "fontSize": "normal",
    "animations": true
  },

  "behavior": {
    "confirmDestructive": true,
    "autoRefresh": true,
    "refreshInterval": 5000,
    "mouseEnabled": true,
    "soundEnabled": false
  },

  "shortcuts": {
    "custom": {
      "Ctrl+Q": "quickSolve",
      "Ctrl+B": "benchmark"
    }
  },

  "favorites": [
    "solve",
    "memory.search",
    "dream.run",
    "system.dashboard"
  ],

  "history": {
    "maxSize": 100,
    "persistAcrossSessions": true
  }
}
```

### 9.2 Session Persistence

**Auto-save state**:
- Current menu position
- Form field values
- Active tabs/views
- Scroll positions
- Filter/search terms

**Restore on launch**:
```
â”Œâ”€â”€â”€ Welcome Back â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  Previous session found (5 minutes ago)        â”‚
â”‚                                                 â”‚
â”‚  â€¢ Location: Memory Browser                    â”‚
â”‚  â€¢ Unsaved form: Advanced Solve                â”‚
â”‚  â€¢ Active solve sessions: 2 running            â”‚
â”‚                                                 â”‚
â”‚  [  Restore Session  ]    [  Start Fresh  ]    â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Advanced Features

### 10.1 Command Palette

**Activate**: `Ctrl+P`

```
â”Œâ”€â”€â”€ Command Palette â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚ Type command or search...                                   â”‚
â”‚ > solve                                                      â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ğŸ§© Solve Puzzle                                        â”‚  â”‚
â”‚ â”‚ ğŸ§© Quick Solve                                         â”‚  â”‚
â”‚ â”‚ ğŸ§© Advanced Solve                                      â”‚  â”‚
â”‚ â”‚ ğŸ§© Batch Solve                                         â”‚  â”‚
â”‚ â”‚ âš™ï¸  Solve: Configuration Presets                       â”‚  â”‚
â”‚ â”‚ ğŸ“Š Benchmark: Solve Performance                        â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚ [â†‘â†“] Navigate  [Enter] Execute  [Esc] Cancel                â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features**:
- Fuzzy search across all commands
- Recent commands history
- Keyboard-driven navigation
- Shows shortcuts for each command

### 10.2 Split View / Multi-Panel

**Layout Manager**: `Ctrl+\`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layout: Split View                          [=] [â–¡] [Ã—]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚                                    â”‚
â”‚  Solve Puzzle (Form)    â”‚  Live Visualization               â”‚
â”‚                         â”‚                                    â”‚
â”‚  [Puzzle File]          â”‚  â”Œâ”€â”€â”€ Puzzle Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  [Memory System]        â”‚  â”‚ 5 3 Â· â”‚ Â· 7 Â· â”‚ Â· Â· Â·   â”‚     â”‚
â”‚  [Parameters]           â”‚  â”‚ 6 Â· Â· â”‚ 1 9 5 â”‚ Â· Â· Â·   â”‚     â”‚
â”‚                         â”‚  â”‚ ...                      â”‚     â”‚
â”‚  [Start Solve]          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â”‚                                    â”‚
â”‚                         â”‚  Progress: 23% (Iteration 23/100) â”‚
â”‚                         â”‚                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status Bar                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Layouts**:
- Single panel (default)
- Split horizontal (2 panels)
- Split vertical (2 panels)
- Quad view (4 panels)
- Custom layouts (save/load)

### 10.3 Watch Mode

**Auto-refresh for live data**:

```
â”Œâ”€â”€â”€ System Status (Watch Mode: ON) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auto-refresh: 5s  [â¸ Pause] [âµ Resume] [â†» Refresh Now]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ Last Update: 2 seconds ago                                  â”‚
â”‚                                                              â”‚
â”‚ Active Sessions: 3 â— (â†‘ 1 from last refresh)               â”‚
â”‚ CPU Usage: 31% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                           â”‚
â”‚ Memory: 342 MB â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘                        â”‚
â”‚ Puzzles Solved: 147 total (+3), 3 in progress (-1)         â”‚
â”‚                                                              â”‚
â”‚ Changes since last refresh:                                 â”‚
â”‚ â€¢ Session solve-047 completed successfully                  â”‚
â”‚ â€¢ Dream cycle started (session consolidation)              â”‚
â”‚ â€¢ Memory usage decreased 15 MB                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.4 Notifications

**System Notifications**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”” Notification                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Puzzle solved successfully!                         â”‚
â”‚ hard-01.json completed in 12.4s (47 iterations)     â”‚
â”‚                                                      â”‚
â”‚ [View Details]  [Dismiss]                    (3s)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Notification Center**: Access recent notifications

```
â”Œâ”€â”€â”€ Notifications (5 unread) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                      â”‚
â”‚ âœ“ 10:34 | Puzzle solved: hard-01.json              â”‚
â”‚ â„¹ 10:28 | Dream cycle completed                    â”‚
â”‚ âš  10:15 | Memory usage high (450 MB)               â”‚
â”‚ âœ“ 10:05 | Benchmark completed                      â”‚
â”‚ â„¹ 09:47 | Database optimized                       â”‚
â”‚                                                      â”‚
â”‚ [Clear All]  [Settings]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.5 Quick Actions Bar

**Customizable toolbar**: Common actions for quick access

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Quick Actions:                                             â”‚
â”‚ [ğŸ§© Solve] [ğŸ§  Memory] [ğŸ’­ Dream] [ğŸ“Š Bench] [ğŸ”§ Status]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Configure**: Drag and drop to customize

---

## 11. Integration with CLI

### 11.1 CLI Command Execution

**Behind the scenes**:
```javascript
// Form submission â†’ CLI command generation â†’ Execution

// User fills form:
{
  puzzleFile: 'puzzles/hard-01.json',
  memorySystem: 'agentdb',
  enableRL: true,
  maxIterations: 100
}

// Generates CLI command:
'machine-dream solve puzzles/hard-01.json --memory-system agentdb --enable-rl --max-iterations 100'

// Executes via child_process
const result = await executeCLICommand(command);

// Parses output and updates UI
updateUI(result);
```

### 11.2 Real-time Output Streaming

```javascript
// Stream CLI output to TUI
const process = spawn('machine-dream', ['solve', 'puzzles/hard-01.json']);

process.stdout.on('data', (data) => {
  // Parse output (JSON lines)
  const event = JSON.parse(data);

  // Update live visualization
  if (event.type === 'ITERATION_COMPLETE') {
    updatePuzzleGrid(event.data.state);
    updateProgress(event.data.iteration);
  }
});
```

### 11.3 Command History

```
â”Œâ”€â”€â”€ Command History â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                      â”‚
â”‚ 1. solve puzzles/hard-01.json --enable-rl           â”‚
â”‚    âœ“ Success (12.4s, 47 iterations)                 â”‚
â”‚                                                      â”‚
â”‚ 2. memory optimize --prune-redundancy               â”‚
â”‚    âœ“ Success (150â†’47 patterns)                      â”‚
â”‚                                                      â”‚
â”‚ 3. benchmark run quick                              â”‚
â”‚    âœ“ Success (95% success rate)                     â”‚
â”‚                                                      â”‚
â”‚ 4. dream run --sessions session-001,session-002     â”‚
â”‚    âœ“ Success (47â†’5 patterns)                        â”‚
â”‚                                                      â”‚
â”‚ [Re-run] [Edit] [Export] [Clear]                    â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. Error Handling and User Feedback

### 12.1 Validation Feedback

**Real-time validation**:

```
Max Iterations: [abc  ] âœ— Must be a number
                         â†‘ Invalid input highlighted in red

Max Iterations: [1000000] âš  Value exceeds maximum (1000)
                             â†‘ Warning in yellow

Max Iterations: [100  ] âœ“ Valid
                         â†‘ Confirmed in green
```

### 12.2 Loading States

```
â”Œâ”€â”€â”€ Initializing System â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚         â ‹ Loading configuration...              â”‚
â”‚         âœ“ Configuration loaded                  â”‚
â”‚         â ™ Initializing AgentDB...               â”‚
â”‚         âœ“ AgentDB initialized                   â”‚
â”‚         â ¹ Loading GRASP strategies...           â”‚
â”‚         âœ“ GRASP strategies loaded               â”‚
â”‚         ...                                      â”‚
â”‚                                                  â”‚
â”‚  Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 75%            â”‚
â”‚  Estimated: 2s remaining                        â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.3 Error Recovery

```
â”Œâ”€â”€â”€ Connection Error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  âœ— Failed to connect to AgentDB                 â”‚
â”‚                                                  â”‚
â”‚  Details:                                        â”‚
â”‚  Database file locked by another process        â”‚
â”‚                                                  â”‚
â”‚  Suggested Actions:                              â”‚
â”‚  1. Close other instances of Machine Dream      â”‚
â”‚  2. Run system cleanup                          â”‚
â”‚  3. Use ReasoningBank instead                   â”‚
â”‚                                                  â”‚
â”‚  [1. Auto-fix] [2. Cleanup] [3. Switch] [Cancel]â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 13. Accessibility Features

### 13.1 Screen Reader Support

- Semantic markup for all UI elements
- ARIA labels for interactive components
- Announcement of state changes
- Keyboard-only navigation

### 13.2 High Contrast Mode

**Activate**: Config > Accessibility > High Contrast

```
Enhanced contrast ratios (WCAG AAA compliant)
- Text: 7:1 minimum contrast
- UI elements: 4.5:1 minimum
- Borders: Bold, high-contrast
```

### 13.3 Font Size Adjustment

```
Config > Display > Font Size
â—‹ Small
â— Normal
â—‹ Large
â—‹ Extra Large
```

### 13.4 Reduced Motion

```
Config > Accessibility > Reduce Motion
â˜‘ Disable animations
â˜‘ Disable transitions
â˜‘ Static progress indicators
```

---

## 14. Performance Optimization

### 14.1 Virtual Scrolling

**For large datasets** (e.g., memory browser with 10,000+ items):
- Only render visible rows
- Recycle DOM elements
- Smooth scrolling experience

### 14.2 Lazy Loading

```
â”Œâ”€â”€â”€ Memory Patterns (1,247 total) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Showing: 1-50                                â”‚
â”‚                                              â”‚
â”‚ [Pattern data...]                            â”‚
â”‚                                              â”‚
â”‚ Loading more... â ‹                           â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 14.3 Debouncing

**Search input**: Debounce 300ms to avoid excessive queries

```javascript
let searchTimeout;
searchInput.on('change', (value) => {
  clearTimeout(searchTimeout);
  searchTimeout = setTimeout(() => {
    performSearch(value);
  }, 300);
});
```

---

## 15. Testing Strategy

### 15.1 Unit Tests

```typescript
describe('MenuNavigation', () => {
  it('should navigate to submenu on arrow right', () => {
    const menu = new MainMenu();
    menu.selectItem('Memory');
    menu.pressKey('right');
    expect(menu.currentSubmenu).toBe('memory');
  });
});

describe('FormValidation', () => {
  it('should validate numeric input', () => {
    const form = new SolveForm();
    form.setField('maxIterations', 'abc');
    expect(form.isValid()).toBe(false);
    expect(form.errors).toContain('Must be a number');
  });
});
```

### 15.2 Integration Tests

```typescript
describe('Solve Workflow', () => {
  it('should complete solve workflow', async () => {
    const tui = new MachineDreamTUI();
    await tui.start();

    tui.navigateTo('Solve Puzzle');
    tui.fillForm({
      puzzleFile: 'test/easy-01.json',
      memorySystem: 'agentdb'
    });
    await tui.submit();

    await tui.waitForCompletion();

    const result = tui.getResult();
    expect(result.solved).toBe(true);
  });
});
```

### 15.3 Visual Regression Tests

```typescript
describe('Visual Regression', () => {
  it('should match dashboard screenshot', async () => {
    const tui = new MachineDreamTUI();
    await tui.navigateTo('Dashboard');

    const screenshot = await tui.screenshot();
    expect(screenshot).toMatchSnapshot();
  });
});
```

---

## 16. Implementation Roadmap

### Phase 1: Core Framework (Week 1)
- âœ“ Set up blessed/ink framework
- âœ“ Implement basic menu navigation
- âœ“ Create layout system (header, menu, content, status)
- âœ“ Basic keyboard navigation
- âœ“ Simple form components (input, checkbox, button)

### Phase 2: Core Screens (Week 2)
- âœ“ Dashboard / Home screen
- âœ“ Solve puzzle form and visualization
- âœ“ System status screen
- âœ“ Configuration viewer/editor
- âœ“ CLI command integration

### Phase 3: Advanced Features (Week 3)
- âœ“ Memory browser and search
- âœ“ Benchmark results viewer
- âœ“ Dream cycle visualization
- âœ“ Real-time solving visualization
- âœ“ Real-time updates and watch mode

### Phase 4: Polish & UX (Week 4)
- âœ“ Themes and customization
- âœ“ Command palette
- âœ“ Help system
- âœ“ Error handling and recovery
- âœ“ Session persistence
- âœ“ Performance optimization

### Phase 5: Testing & Documentation (Week 5)
- âœ“ Unit and integration tests
- âœ“ User documentation
- âœ“ Video tutorials
- âœ“ Performance benchmarks
- âœ“ Accessibility audit

---

## 17. Success Criteria

### 17.1 Functional Requirements

- âœ… All CLI commands accessible via TUI
- âœ… Forms validate input with helpful error messages
- âœ… Real-time visualizations update smoothly
- âœ… Keyboard navigation works for all screens
- âœ… Mouse support for all interactive elements
- âœ… Session state persists across restarts
- âœ… Configuration changes apply immediately
- âœ… Help available for all screens and commands

### 17.2 Performance Requirements

- âœ… TUI startup: <2s
- âœ… Screen transitions: <100ms
- âœ… Form submission: <50ms (before CLI execution)
- âœ… Real-time updates: <50ms latency
- âœ… Memory usage: <100MB for TUI
- âœ… Handle 1000+ items in lists/tables smoothly

### 17.3 Usability Requirements

- âœ… Intuitive navigation (learnable in <5 minutes)
- âœ… Consistent UI patterns throughout
- âœ… Clear visual hierarchy
- âœ… Helpful error messages with recovery suggestions
- âœ… Responsive feedback for all actions
- âœ… Works in terminals 80x24 and larger

### 17.4 Accessibility Requirements

- âœ… Screen reader compatible
- âœ… Keyboard-only navigation
- âœ… High contrast mode
- âœ… Adjustable font sizes
- âœ… Reduced motion option

---

## 18. Future Enhancements

### 18.1 Advanced Visualizations

- **Graph visualizations**: Strategy dependency graphs, knowledge graph
- **Charts**: Performance trends, solve time metrics over time
- **Heatmaps**: Strategy usage, puzzle difficulty patterns
- **Timeline view**: Session history with replay capability

### 18.2 Collaboration Features

- **Multi-user sessions**: Share solving sessions with team
- **Live updates**: See real-time solving progress from other users
- **Chat/annotations**: Communicate about strategies within TUI
- **Session sharing**: Export/import solving sessions and configurations

### 18.3 Scripting and Automation

- **Macro recording**: Record and replay actions
- **Scheduled tasks**: Cron-like task scheduling
- **Webhooks**: Trigger actions on events
- **Custom plugins**: Extend TUI with plugins

### 18.4 Mobile/Web Version

- **Web UI**: Browser-based version of TUI
- **Mobile app**: iOS/Android companion app
- **Progressive Web App**: Installable web version
- **API server**: Expose TUI functionality via REST API

---

## 19. Appendices

### 19.1 Blessed.js Component Reference

```javascript
// Box (container)
const box = blessed.box({
  top: 'center',
  left: 'center',
  width: '50%',
  height: '50%',
  border: { type: 'line' },
  style: {
    border: { fg: 'blue' }
  }
});

// List (menu)
const list = blessed.list({
  items: ['Item 1', 'Item 2'],
  mouse: true,
  keys: true,
  vi: true,
  style: {
    selected: { bg: 'blue' }
  }
});

// Form
const form = blessed.form({
  mouse: true,
  keys: true
});

// Textbox (input)
const textbox = blessed.textbox({
  label: 'Name:',
  height: 3,
  inputOnFocus: true
});

// Progress bar
const progress = blessed.progressbar({
  filled: 0,
  style: {
    bar: { bg: 'blue' }
  }
});

// Table
const table = blessed.table({
  headers: ['Name', 'Value'],
  data: [['foo', 'bar']],
  columnWidth: [20, 20]
});
```

### 19.2 Sample Configuration Files

See Section 9.1 for `.machine-dream-tui.json`

### 19.3 Terminal Compatibility

**Tested Terminals**:
- âœ… iTerm2 (macOS)
- âœ… Terminal.app (macOS)
- âœ… GNOME Terminal (Linux)
- âœ… Konsole (Linux)
- âœ… Windows Terminal (Windows 10/11)
- âœ… ConEmu (Windows)
- âš ï¸ CMD.exe (limited features)
- âš ï¸ PowerShell (requires UTF-8 encoding)

**Requirements**:
- UTF-8 encoding support
- 256 colors minimum (truecolor recommended)
- Mouse support (optional)
- Minimum 80x24 characters

---

## 20. Machine-Readable Output Architecture

### 20.1 JSON Event Stream

**Purpose**: Enable complete testability by making all TUI actions observable and machine-readable.

**Core Interface**:
```typescript
interface TUIOutputEvent {
  timestamp: number;
  eventType: 'render' | 'input' | 'navigation' | 'command' | 'state' | 'error';
  component: string;
  data: Record<string, unknown>;
}
```

### 20.2 Event Types

| Event Type | Description | Example Data |
|------------|-------------|--------------|
| `render` | Component rendered to screen | `{ screen: 'solve', component: 'form', content: {...} }` |
| `input` | User input received | `{ key: 'enter', component: 'form-field' }` |
| `navigation` | Menu/screen navigation | `{ from: 'home', to: 'solve' }` |
| `command` | CLI command execution | `{ command: 'solve', args: [...], status: 'started' }` |
| `state` | Application state change | `{ field: 'sessionState.currentScreen', value: 'solve' }` |
| `error` | Error occurred | `{ code: 'INVALID_INPUT', message: '...' }` |

### 20.3 Output Configuration

**Environment Variable**:
```bash
TUI_DEBUG_OUTPUT=/tmp/tui-events.jsonl machine-dream tui
```

**CLI Flag**:
```bash
machine-dream tui --debug-output /tmp/tui-events.jsonl
```

**Output Targets**:
- `stdout` - Write to standard output (interleaved with TUI)
- `<file>` - Write to file (one JSON event per line)
- `/dev/null` - Disable output (production mode)

### 20.4 Test Integration

```typescript
// Example: E2E test using event stream
const driver = new TestDriver({ debugOutput: '/tmp/test.jsonl' });
await driver.start();
await driver.pressKey('s'); // Navigate to Solve

const navEvent = await driver.waitForEvent('navigation', 5000);
expect(navEvent.data.to).toBe('solve');
```

---

## 21. Text Alignment and Emoji Handling

### 21.1 String Width Library

**Dependency**: `string-width` npm package

**Purpose**: Accurate character width calculation for terminals, accounting for:
- Emoji (usually 2 cells wide)
- Wide characters (CJK characters)
- Zero-width joiners
- ANSI escape codes

**Usage**:
```typescript
import stringWidth from 'string-width';

// Emoji takes 2 cells
stringWidth('ğŸ§©');  // Returns: 2
stringWidth('A');   // Returns: 1

// Proper padding
function padMenuItem(icon: string, label: string): string {
  const iconWidth = stringWidth(icon);
  const iconPadding = 4 - iconWidth;
  const labelPadded = label.padEnd(14);
  return `${icon}${' '.repeat(iconPadding)}${labelPadded}`;
}
```

### 21.2 Fixed Column Widths

**Menu Item Layout**:
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚Iconâ”‚ Label        â”‚Shortâ”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ 4  â”‚ 14           â”‚ 5   â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

ğŸ§©   Solve Puzzle   [S]
ğŸ§    Memory         [M]
```

**Width Specifications**:
- Icon column: 4 characters (emoji + trailing space)
- Label column: 14 characters (padded with spaces)
- Shortcut column: 5 characters (e.g., "[S]" + space)

### 21.3 Box Drawing Fallbacks

**Unicode Box Drawing** (default, when supported):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Content â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ASCII Fallback** (for limited terminals):
```
+---------+
| Content |
+---------+
```

**Detection Logic**:
```typescript
function getBoxChars(): BoxCharacters {
  if (terminalInfo.supportsUnicode && !terminalInfo.isCI) {
    return {
      topLeft: 'â”Œ', topRight: 'â”',
      bottomLeft: 'â””', bottomRight: 'â”˜',
      horizontal: 'â”€', vertical: 'â”‚'
    };
  }
  return {
    topLeft: '+', topRight: '+',
    bottomLeft: '+', bottomRight: '+',
    horizontal: '-', vertical: '|'
  };
}
```

---

## 22. Enhanced Terminal Detection

### 22.1 Environment Detection Matrix

| Environment | Detection Method | Capabilities |
|-------------|------------------|--------------|
| **VS Code Terminal** | `TERM_PROGRAM=vscode` | Full features (mouse, colors, unicode) |
| **iTerm2** | `TERM_PROGRAM=iTerm.app` | Full features |
| **Windows Terminal** | `WT_SESSION` env var defined | Full features |
| **Docker** | `/.dockerenv` file exists | Headless mode (no mouse, limited colors) |
| **GitHub Actions** | `GITHUB_ACTIONS=true` | Headless mode, CI mode |
| **Generic CI** | `CI=true` | Headless mode, CI mode |
| **WSL** | `WSL_DISTRO_NAME` defined | Full features |
| **cmd.exe** | Windows + no `WT_SESSION` | ASCII borders, no mouse, 16 colors |
| **SSH** | `SSH_TTY` or `SSH_CONNECTION` | Full features (remote terminal) |

### 22.2 Capability Detection

```typescript
interface TerminalCapabilities {
  supportsUnicode: boolean;
  supportsColor: boolean;
  colorDepth: 16 | 256 | 16777216; // 16, 256, or truecolor
  supportsMouse: boolean;
  supportsKeyboard: boolean;
  isHeadless: boolean; // CI/Docker
  columns: number;
  rows: number;
}

function detectCapabilities(): TerminalCapabilities {
  const isCI = Boolean(process.env.CI || process.env.GITHUB_ACTIONS);
  const isDocker = fs.existsSync('/.dockerenv');
  const isTTY = process.stdout.isTTY;

  return {
    supportsUnicode: !isCI && !isDocker && hasUTF8Locale(),
    supportsColor: isTTY && !isCI,
    colorDepth: process.stdout.getColorDepth?.() || 16,
    supportsMouse: isTTY && !isCI && !isDocker,
    supportsKeyboard: isTTY,
    isHeadless: isCI || isDocker || !isTTY,
    columns: process.stdout.columns || 80,
    rows: process.stdout.rows || 24
  };
}
```

### 22.3 Headless Mode

When running in CI/Docker/non-TTY environments:
- Disable interactive features
- Use simple output mode
- Skip mouse/keyboard setup
- Use ASCII-only characters
- Provide clear error messages

---

## 23. Component-Based Architecture

### 23.1 Directory Structure

```
src/tui/
â”œâ”€â”€ index.ts                    # Public API exports
â”œâ”€â”€ TUIApplication.ts           # Main application orchestrator
â”œâ”€â”€ types.ts                    # TypeScript interfaces
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ base/
â”‚   â”‚   â”œâ”€â”€ Component.ts        # Base component class
â”‚   â”‚   â””â”€â”€ FocusManager.ts     # Focus and navigation
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Screen.ts           # blessed.screen wrapper
â”‚   â”‚   â”œâ”€â”€ Header.ts           # Title bar component
â”‚   â”‚   â”œâ”€â”€ Sidebar.ts          # Menu sidebar
â”‚   â”‚   â”œâ”€â”€ ContentArea.ts      # Main content area
â”‚   â”‚   â””â”€â”€ StatusBar.ts        # Bottom status bar
â”‚   â”‚
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ Menu.ts             # Navigation menu
â”‚   â”‚   â”œâ”€â”€ Form.ts             # Form container
â”‚   â”‚   â”œâ”€â”€ TextField.ts        # Text input field
â”‚   â”‚   â”œâ”€â”€ Select.ts           # Dropdown select
â”‚   â”‚   â”œâ”€â”€ Checkbox.ts         # Boolean checkbox
â”‚   â”‚   â”œâ”€â”€ Button.ts           # Action button
â”‚   â”‚   â”œâ”€â”€ Table.ts            # Data table
â”‚   â”‚   â”œâ”€â”€ ProgressBar.ts      # Progress indicator
â”‚   â”‚   â””â”€â”€ LogViewer.ts        # Scrolling log viewer
â”‚   â”‚
â”‚   â””â”€â”€ modals/
â”‚       â”œâ”€â”€ Modal.ts            # Base modal dialog
â”‚       â”œâ”€â”€ Alert.ts            # Alert dialog
â”‚       â”œâ”€â”€ Confirm.ts          # Confirmation dialog
â”‚       â””â”€â”€ HelpModal.ts        # Help overlay
â”‚
â”œâ”€â”€ screens/                    # Full screen implementations
â”‚   â”œâ”€â”€ HomeScreen.ts           # Dashboard/home
â”‚   â”œâ”€â”€ SolveScreen.ts          # Puzzle solving
â”‚   â”œâ”€â”€ MemoryScreen.ts         # Memory browser
â”‚   â”œâ”€â”€ DreamScreen.ts          # Dream cycle viewer
â”‚   â”œâ”€â”€ BenchmarkScreen.ts      # Benchmark runner
â”‚   â”œâ”€â”€ DemoScreen.ts           # Demo launcher
â”‚   â”œâ”€â”€ ConfigScreen.ts         # Configuration editor
â”‚   â”œâ”€â”€ ExportScreen.ts         # Export wizard
â”‚   â””â”€â”€ SystemScreen.ts         # System utilities
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ CLIExecutor.ts          # CLI command execution
â”‚   â”œâ”€â”€ OutputManager.ts        # JSON event stream
â”‚   â”œâ”€â”€ StateManager.ts         # Application state
â”‚   â””â”€â”€ ThemeManager.ts         # Theme management
â”‚
â””â”€â”€ utils/
    â”œâ”€â”€ textAlign.ts            # string-width alignment
    â”œâ”€â”€ boxDrawing.ts           # Box character utilities
    â””â”€â”€ terminalDetect.ts       # Environment detection
```

### 23.2 Base Component Pattern

```typescript
// components/base/Component.ts
export abstract class Component {
  protected element: Widgets.Node;
  protected outputManager: OutputManager;

  abstract render(): void;

  protected emit(eventType: string, data: unknown): void {
    this.outputManager.emit({
      timestamp: Date.now(),
      eventType,
      component: this.constructor.name,
      data
    });
  }
}
```

### 23.3 Screen Implementation Pattern

```typescript
// screens/SolveScreen.ts
export class SolveScreen extends Component {
  private form: Form;
  private submitButton: Button;

  render(): void {
    this.form = new Form({ /* config */ });
    this.submitButton = new Button({
      label: 'Start Solve',
      onClick: () => this.handleSubmit()
    });

    this.emit('render', { screen: 'solve' });
  }

  private async handleSubmit(): Promise<void> {
    const formData = this.form.getData();
    this.emit('command', {
      command: 'solve',
      args: [formData.puzzleFile],
      options: formData
    });

    await this.cliExecutor.execute('solve', [formData.puzzleFile], formData);
  }
}
```

---

## 24. E2E Test Protocol

### 24.1 TestDriver Interface

```typescript
interface TUITestDriver {
  // Lifecycle
  start(options?: TUITestOptions): Promise<void>;
  stop(): Promise<void>;

  // Input simulation
  pressKey(key: string): Promise<void>;
  pressKeys(keys: string[]): Promise<void>;
  typeText(text: string): Promise<void>;

  // State inspection (from JSON event stream)
  waitForEvent(type: string, timeout?: number): Promise<TUIOutputEvent>;
  getEvents(filter?: Partial<TUIOutputEvent>): TUIOutputEvent[];
  getLastEvent(type?: string): TUIOutputEvent | undefined;
  clearEvents(): void;

  // Assertions
  assertScreen(screenName: string): void;
  assertFocus(componentId: string): void;
  assertText(pattern: string | RegExp): void;
  assertEventEmitted(type: string, data?: Partial<unknown>): void;
}

interface TUITestOptions {
  debugOutput?: string;        // Path to event log file
  headless?: boolean;           // Run in headless mode
  dimensions?: { cols: number; rows: number };
  theme?: 'dark' | 'light';
}
```

### 24.2 Test Example

```typescript
import { describe, it, expect, beforeAll, afterAll } from 'vitest';
import { TestDriver } from '../helpers/TestDriver';

describe('Solve Workflow E2E', () => {
  let driver: TestDriver;

  beforeAll(async () => {
    driver = new TestDriver({
      debugOutput: '/tmp/test-solve.jsonl',
      headless: true
    });
    await driver.start();
  });

  afterAll(async () => {
    await driver.stop();
  });

  it('should complete solve workflow', async () => {
    // Navigate to Solve screen
    await driver.pressKey('s');

    const navEvent = await driver.waitForEvent('navigation', 5000);
    expect(navEvent.data.to).toBe('solve');

    // Fill form
    await driver.typeText('puzzles/easy-01.json');
    await driver.pressKey('tab');
    await driver.typeText('test-session');

    // Submit form
    await driver.pressKeys(['ctrl', 'enter']);

    // Wait for command execution
    const cmdEvent = await driver.waitForEvent('command', 5000);
    expect(cmdEvent.data.command).toBe('solve');
    expect(cmdEvent.data.args).toContain('puzzles/easy-01.json');

    // Wait for completion
    const completeEvent = await driver.waitForEvent('command-complete', 30000);
    expect(completeEvent.data.success).toBe(true);
  });
});
```

### 24.3 Mock Screen Utility

```typescript
// tests/tui/helpers/MockScreen.ts
export class MockScreen {
  private events: TUIOutputEvent[] = [];

  emit(event: TUIOutputEvent): void {
    this.events.push(event);
  }

  getEvents(): TUIOutputEvent[] {
    return [...this.events];
  }

  render(): void {
    // No-op in test mode
  }
}
```

---

**Document Status:** âœ… Complete and Ready for Implementation

**Next Steps:**
1. Review with UX team
2. Create wireframe mockups
3. Begin Phase 1 implementation
4. User testing with prototypes
5. Iterate based on feedback
